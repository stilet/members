{#await user}
  <p>Loading</p>
{:then data}
  <User user={data.data.users[0]} />
  <pre>{JSON.stringify(data, null, 2)}</pre>
{:catch err}
<p>Error</p>
{/await}

<script>
  import { subscription, connect } from 'svelte-apollo'
  import gql from 'graphql-tag';

  const GET_USER = gql`subscription ($name: String) {
    users: account_user(where:{name: { _eq: $name }}, limit: 1) {
      name
      fullname
      email

      housenumber
      housenumberaddon
      city
      country

      phone
      streetname
      zipcode

      user_roles {
        role {
          name
        }
      }
    }
  }`

  export default {
    computed: {
      user: ({ params }) => subscription(GET_USER, { variables: params})
    },
    components: {
      User: '../../components/User.html'
    },
    oncreate() {
      this.store.graphqlConnect(this)
    },
  }
</script>