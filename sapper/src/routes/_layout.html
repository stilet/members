<script>
	import { onDestroy, onMount } from 'svelte';

	// [svelte-upgrade suggestion]
	// manually refactor all references to __this
	const __this = {};

	export let child;
	export let preloading;

	import Nav from 'src/components/Nav.html';
	import Notifications from 'src/components/Notifications.html';

	onMount(() => {
		__this.stopWatch = __this.store.watchAuth()
	});

	onDestroy(() => {
		__this.stopWatch()
	});
</script>

<Nav segment={child.segment} :child />


<main class='container'>
	{#if preloading}
		<p>Loading ...</p>
	{:else}
		<svelte:component this={child.component} {...child.props}/>
	{/if}
</main>


<Notifications />

<style>
	main {
		position: relative;
		max-width: 56em;
		background-color: white;
		padding: 2em;
		margin: 0 auto;
		box-sizing: border-box;
	}
</style>